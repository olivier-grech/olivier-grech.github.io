<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Creating scrolling text in Unity · Olivier Grech</title><meta name="description" content="Creating scrolling text in Unity - Olivier Grech"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://yoursite.com/atom.xml" title="Olivier Grech"></head><body><div class="wrap"><header><a href="/" class="logo-link"><span>OLIVIER GRECH</span></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li><li class="nav-list-item"><a href="/atom.xml" target="_self" class="nav-list-link">RSS</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Creating scrolling text in Unity</h1><div class="post-info">Dec 10, 2017</div><div class="post-content"><p>In this article, I will explain how to create scrolling text in Unity, with an alterable scrolling speed. I am refering to this:</p>
<p><img src="pokemon.gif" alt="pokemon"></p>
<p>I am going to detail how to create a function that takes a string as a parameter, and display that string in a scrolling fashion. It should be easy to adapt this function for whatever you want to do. I’m also going to pass a float as a parameter that will define the scrolling speed, though I would recommend creating an enum for that. For example, this is what I did for a personnal project:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">public</span> <span class="keyword">enum</span> TEXT_SPEED &#123;VERY_SLOW, SLOW, NORMAL, FAST, VERY_FAST, INSTANT&#125;</div></pre></td></tr></table></figure>
<h1 id="How-to-do-it"><a href="#How-to-do-it" class="headerlink" title="How to do it"></a>How to do it</h1><p>I begin by creating the signature of this function:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> IEnumerator <span class="title">DisplayNewLine</span>(<span class="params"><span class="keyword">string</span> text, <span class="keyword">float</span> numberOfFramesBetweenLetters</span>) </span>&#123;</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>The <code>numberOfFramesBetweenLetters</code> value represents the number of frames elapsed between each letter. You may have noticed that I created a coroutine. This is only an implementation choice, and it should be easy to adapt the code for a normal function. You may also have noticed I used a <code>float</code> instead of an <code>int</code> for the number of frames between letters. I will explain why a bit latter.</p>
<p>The first step is to loop over the text to display:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> IEnumerator <span class="title">DisplayNewLine</span>(<span class="params"><span class="keyword">string</span> text, <span class="keyword">float</span> numberOfFramesBetweenLetters</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">char</span>[] charArray = line.ToCharArray();</div><div class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line"></div><div class="line">    <span class="keyword">while</span> (i &lt; charArray.Length) &#123;</div><div class="line">        i++;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>For the rest of the tutorial, I will assume <code>dialogueBox</code> refers to a Unity <code>Text</code> component. I will want to manipulate <code>dialogueBox.text</code> to display the scrolling text. </p>
<p>To wait for a number of frames, I yield <code>WaitForFixedUpdate</code> as many time as necessary by using a loop:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> IEnumerator <span class="title">DisplayNewLine</span>(<span class="params"><span class="keyword">string</span> text, <span class="keyword">float</span> numberOfFramesBetweenLetters</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">char</span>[] charArray = line.ToCharArray();</div><div class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">    m_DialogueBoxText.text = <span class="string">""</span>;</div><div class="line"></div><div class="line">    <span class="comment">// Display the text</span></div><div class="line">    <span class="keyword">while</span> (i &lt; charArray.Length) &#123;</div><div class="line"></div><div class="line">        i++;</div><div class="line">        m_DialogueBoxText.text += charArray[i];</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; numberOfFramesBetweenLetters; ++j) &#123;</div><div class="line">            <span class="function"><span class="keyword">yield</span> return new <span class="title">WaitForFixedUpdate</span>(<span class="params"></span>)</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>I use <code>WaitForFixedUpdate</code> instead of <code>WaitForUpdate</code> to make sure the text is displayed at a constant speed.</p>
<p>This function should work, but only up to a specific speed. Indeed, you cannot update the screen more than once every frame! To achieve a speed higher than “one letter displayed every frame”, we are going to display more than one letter at once. </p>
<blockquote>
<p>Note that than I say “frame”, I’m actually refering to Unity fixed frametate (since I use the <code>WaitForFixedUpdate</code> function), which occurs by default every 0.02 second. You can change this value by going to <strong>Edit → Project Settings → Time</strong>.</p>
</blockquote>
<p>Let us add the value <code>numberOfLettersToDisplayAtOnce</code> in our function. You only want to use it if the value of <code>numberOfFramesBetweenLetters</code> is inferior to <code>1.0f</code> (and that is why I used a <code>float</code> and not an <code>int</code>). For example, if <code>numberOfFramesBetweenLetters</code> is equal to <code>0.5f</code>, we are going to display two letters at once. </p>
<p>More generaly, <code>numberOfLettersToDisplayAtOnce</code> is equal to <code>1.0f / numberOfFramesBetweenLetters</code>.</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// Calculate the number of letters to display at once, if necessary</span></div><div class="line"><span class="keyword">int</span> numberOfLettersToDisplayAtOnce;</div><div class="line"></div><div class="line"><span class="keyword">if</span> (numberOfFramesBetweenLetters &lt; <span class="number">1.0</span>f)</div><div class="line">    numberOfLettersToDisplayAtOnce = (<span class="keyword">int</span>)(<span class="number">1.0</span>f / numberOfFramesBetweenLetters);</div><div class="line"><span class="keyword">else</span></div><div class="line">    numberOfLettersToDisplayAtOnce = <span class="number">1</span>;</div></pre></td></tr></table></figure>
<p>This is almost over, we only need to effectively display more than one letter at once by adding another loop:</p>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">private</span> IEnumerator <span class="title">DisplayNewLine</span>(<span class="params"><span class="keyword">string</span> text, <span class="keyword">float</span> numberOfFramesBetweenLetters</span>) </span>&#123;</div><div class="line"></div><div class="line">    <span class="keyword">char</span>[] charArray = line.ToCharArray();</div><div class="line">    <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">    m_DialogueBoxText.text = <span class="string">""</span>;</div><div class="line"></div><div class="line">     <span class="comment">// Calculate the number of letters to display at once, if necessary</span></div><div class="line">    <span class="keyword">int</span> numberOfLettersToDisplayAtOnce;</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (numberOfFramesBetweenLetters &lt; <span class="number">1.0</span>f)</div><div class="line">        numberOfLettersToDisplayAtOnce = (<span class="keyword">int</span>)(<span class="number">1.0</span>f / numberOfFramesBetweenLetters);</div><div class="line">    <span class="keyword">else</span></div><div class="line">        numberOfLettersToDisplayAtOnce = <span class="number">1</span>;</div><div class="line"></div><div class="line">    <span class="comment">// Display the text</span></div><div class="line">    <span class="keyword">while</span> (i &lt; charArray.Length) &#123;</div><div class="line"></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; numberOfLettersToDisplayAtOnce; ++j) &#123;</div><div class="line">            <span class="keyword">if</span> (i &lt; charArray.Length) &#123;</div><div class="line">                m_DialogueBoxText.text += charArray[i];</div><div class="line">            &#125;</div><div class="line">            ++i;</div><div class="line">        &#125;</div><div class="line"></div><div class="line">        <span class="comment">// Wait for a given number of frames</span></div><div class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> j = <span class="number">0</span>; j &lt; Mathf.Max(numberOfFramesBetweenLetters, <span class="number">1.0</span>f); ++j) &#123;</div><div class="line">            <span class="function"><span class="keyword">yield</span> return new <span class="title">WaitForFixedUpdate</span>(<span class="params"></span>)</span>;</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>There are two little tricks: the first one is the <code>if (i &lt; charArray.Length)</code> part. It is used to make sure that you’re not trying to display more letters at once than there is letters left in the text (think about what happen if you try to display a five letters text two letters by two letters). </p>
<p>The second one is the <code>Mathf.Max(numberOfFramesBetweenLetters, 1.0f)</code>. We need to use this to make sure the loop works in the case where <code>numberOfFramesBetweenLetters &lt; 1.0f</code>.</p>
<p>And finaly, here’s an example of how this could look in game:</p>
<p><img src="slowscrolling.gif" alt="slowscrolling"><br><img src="fastscrolling.gif" alt="fastscrolling"></p>
<p>This “simple” effect took me more time to figure out thant I am willing to admit, so I hope it can save you some time. On the other hand, I acknowledge this method is not always very elegant. If you do find a better solution, please let me know!</p>
</div></article></div></main><footer><div class="paginator"><a href="/Making-a-simple-platformer-with-Love-Part-3/" class="next">NEXT</a></div><div class="copyright"><p>© 2017 <a href="http://yoursite.com">Olivier Grech</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>