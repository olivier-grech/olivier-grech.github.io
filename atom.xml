<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Olivier Grech</title>
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-08-07T22:05:49.451Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>Olivier Grech</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>Making a barebone platformer with Löve - Part 2</title>
    <link href="http://yoursite.com/Making-a-platformer-with-Love-Part-2/"/>
    <id>http://yoursite.com/Making-a-platformer-with-Love-Part-2/</id>
    <published>2017-08-07T19:16:22.000Z</published>
    <updated>2017-08-07T22:05:49.451Z</updated>
    
    <content type="html"><![CDATA[<p>Continuing from where we left off in the previous article, we’ll handle basic player movements and collisions.</p>
<h2 id="Moving-the-player"><a href="#Moving-the-player" class="headerlink" title="Moving the player"></a>Moving the player</h2><p>If you recall, the rectangle representing our player is drawn on the screen according to the <code>player.x</code> and <code>player.y</code> values, which we initialized during the call to the <code>love.load</code> function. To move the player, we need to change these values each frame, to reflect the current position of the player. This is where the <code>love.update</code> function will prove useful. </p>
<p>Before looking up what the code in <code>love.update</code> will be, it’s best to explain how the Löve coordinate system works. The origin of the coordinate system is the <em>top left</em> point on the game window. The coordinate of this point is (0, 0). Since the default size of the window is 800*600, the <em>bottom right</em> point of the game window has for coordinate (799, 599). </p>
<p><img src="lovecoordsystem.png" alt="diagram1"></p>
<p>We’ll start by handling the horizontal movement of the player. For that, we need to calculate its horizontal speed. Let’s create a new variable called <code>hsp</code>(for horizontal speed), by initializing it to 0 in the <code>love.load</code> function:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">hsp = <span class="number">0</span></div></pre></td></tr></table></figure>
<p>We need to calculate the value of <code>hsp</code> each frame in the <code>love.update</code> function. How to do this? The player will move when the user is pressing a key. So, we’re going to use a new function called <code>love.keyboard.isDown(&quot;keyName&quot;)</code> to check this. This function will return <code>true</code> if the key identified by “keyName” is pressed, and false if it’s not. We’re going to use the directional arrow keys for example. Copy and paste this code into the <code>love.update</code> function:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> love.keyboard.isDown(<span class="string">"right"</span>) <span class="keyword">then</span></div><div class="line">    hsp = <span class="number">5</span></div><div class="line"><span class="keyword">elseif</span> love.keyboard.isDown(<span class="string">"left"</span>) <span class="keyword">then</span></div><div class="line">    hsp = <span class="number">-5</span></div><div class="line"><span class="keyword">else</span> </div><div class="line">    hsp = <span class="number">0</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line">player.x = player.x + hsp</div></pre></td></tr></table></figure>
<p>If you look back to the coordinates diagram a few lines above, you can see that if we go to the right, the x coordinate increases, while if we go to the left, the x coordinate decreases. </p>
<p>It’s exactly what’s happening here: if the player pressed the key called <em>“right”</em> (which is the right directional arrow key), <code>hsp</code> is positive and player.x increases. If the player pressed the key called <em>“left”</em>, the opposite happens. Finally, if the player is not pressing the right or left directional arrow key, we are not moving him horizontally by setting <code>hsp</code> to 0.</p>
<p>Here’s the code so far, try running it and moving the player:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.load</span><span class="params">()</span></span></div><div class="line"></div><div class="line">    player = &#123;x = <span class="number">100</span>, y = <span class="number">560</span>, w = <span class="number">20</span>, h = <span class="number">20</span>&#125;</div><div class="line">    hsp = <span class="number">0</span></div><div class="line"></div><div class="line">    platform1 = &#123;x = <span class="number">250</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125;</div><div class="line">    platform2 = &#123;x = <span class="number">500</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125; </div><div class="line">    platforms = &#123;platform1, platform2&#125;</div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.update</span><span class="params">(dt)</span></span></div><div class="line"></div><div class="line">    <span class="keyword">if</span> love.keyboard.isDown(<span class="string">"right"</span>) <span class="keyword">then</span></div><div class="line">        hsp = <span class="number">5</span></div><div class="line">    <span class="keyword">elseif</span> love.keyboard.isDown(<span class="string">"left"</span>) <span class="keyword">then</span></div><div class="line">        hsp = <span class="number">-5</span></div><div class="line">    <span class="keyword">else</span> </div><div class="line">        hsp = <span class="number">0</span></div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line">    player.x = player.x + hsp </div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.draw</span><span class="params">()</span></span></div><div class="line"></div><div class="line">    <span class="comment">--Draw the player</span></div><div class="line">    love.graphics.setColor(<span class="number">233</span>, <span class="number">30</span>, <span class="number">99</span>)</div><div class="line">    love.graphics.rectangle(<span class="string">"fill"</span>, player.x, player.y, player.w, player.h)</div><div class="line"></div><div class="line">    <span class="comment">-- Draw the level</span></div><div class="line">    love.graphics.setColor(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)</div><div class="line">    <span class="keyword">for</span> i, platform <span class="keyword">in</span> <span class="built_in">ipairs</span>(platforms) <span class="keyword">do</span></div><div class="line">    	love.graphics.rectangle(<span class="string">"fill"</span>, platform.x, platform.y, platform.w, platform.h)</div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h2 id="Handling-collisions"><a href="#Handling-collisions" class="headerlink" title="Handling collisions"></a>Handling collisions</h2><p>This is the hardest part of this tutorial, so pay attention. We’re going to integrate into our code a function provided on the Löve wiki:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">CheckCollision</span><span class="params">(x1,y1,w1,h1, x2,y2,w2,h2)</span></span></div><div class="line">  <span class="keyword">return</span> x1 &lt; x2+w2 <span class="keyword">and</span></div><div class="line">         x2 &lt; x1+w1 <span class="keyword">and</span></div><div class="line">         y1 &lt; y2+h2 <span class="keyword">and</span></div><div class="line">         y2 &lt; y1+h1</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>(To add a function to your code, just copy and paste it underneath the <code>love.draw</code> function)</p>
<p>This function will return true if the rectangle of coordinates (x1, y1), width w1, and height h1, overlaps with the rectangle of coordinates (x2, y2), width w2, and height h2. A picture is worth a thousand words:</p>
<p><img src="collisioncheck.png" alt="diagram2"></p>
<p>In this case, the function will return <code>true</code> as the two rectangles overlap. </p>
<p>We’re going to create a function that will check for the presence of a platform at a given location. To do this, we will, simply enough, check for the presence of each platform in our <code>platforms</code> object.</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">CheckGroundAtPlace</span><span class="params">(x, y, w, h)</span></span></div><div class="line">    ret = <span class="literal">false</span></div><div class="line">    <span class="keyword">for</span> i, platform <span class="keyword">in</span> <span class="built_in">ipairs</span>(platforms) <span class="keyword">do</span></div><div class="line">    	<span class="keyword">if</span> CheckCollision(platform.x, platform.y, platform.w, platform.h, x, y, w, h) <span class="keyword">then</span></div><div class="line">            ret = <span class="literal">true</span></div><div class="line">        <span class="keyword">end</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">    <span class="keyword">return</span> ret </div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>If any platform is present in the rectangle of coordinates (x, y), width w, and height h, this function will return <code>true</code>. Before using it though, we’re going to need another function, a bit simpler: we’re going to write a function that will return <code>1</code> if its argument is positive, and <code>-1</code> if its argument is negative. Easy enough:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sign</span><span class="params">(number)</span></span></div><div class="line">    <span class="keyword">if</span> number &gt;= <span class="number">0</span> <span class="keyword">then</span></div><div class="line">        <span class="keyword">return</span> <span class="number">1</span></div><div class="line">    <span class="keyword">else</span> </div><div class="line">        <span class="keyword">return</span> <span class="number">-1</span></div><div class="line">    <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>With this two new functions, we will be able to handle collisions. How so? We’re going to change the <code>player.x = player.x + hsp</code> line by checking beforehand if a platform is not in the way of the player. Here’s the updated version, don’t worry I’ll explain:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> hsp &gt;= <span class="number">0</span> <span class="keyword">then</span></div><div class="line">    hoffset = player.w</div><div class="line"><span class="keyword">else</span></div><div class="line">    hoffset = <span class="number">0</span></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">if</span> CheckGroundAtPlace(player.x + hoffset + hsp, player.y, <span class="number">1</span>, player.h) <span class="keyword">then</span></div><div class="line">    <span class="keyword">while</span> <span class="keyword">not</span> CheckGroundAtPlace(player.x + hoffset + Sign(hsp) - <span class="number">1</span>, player.y, <span class="number">1</span>, player.h) <span class="keyword">do</span></div><div class="line">        player.x = player.x + Sign(hsp) </div><div class="line">    <span class="keyword">end</span></div><div class="line"><span class="keyword">else</span></div><div class="line">    player.x = player.x + hsp </div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>We’re beginning by calculating an horizontal offset. It is a bit tricky: since the origin of the player sprites is on the left, if the player is going to the right we’re going to need to add the player width to our calculations. So we’re setting <code>hoffset</code> to <code>player.w</code>.</p>
<p>Then, we’re going to check for a platform in a area the height of the player and one pixel wide. </p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CheckGroundAtPlace(player.x + hoffset + hsp, player.y, <span class="number">1</span>, player.h)</div></pre></td></tr></table></figure>
<p>It’s located at <code>(player.x + hoffset + hsp, player.y)</code>, so it will look like this for exemple (the area we’re checking is colored in purple):</p>
<p><img src="platformcheck1.png" alt="diagram3"></p>
<p>If there’s no platform in this area, we simply move the player like before by doing <code>player.x = player.x + hsp</code>. If there’s indeed a platform in this area, what we’re going to do is move the player pixel by pixel until he’s right next to the platform. At this point, we stop his movement. To do this, we first check for a platform right next to him.</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CheckGroundAtPlace(player.x + hoffset + Sign(hsp) - <span class="number">1</span>, player.y, <span class="number">1</span>, player.h)</div></pre></td></tr></table></figure>
<p>The area will look like this this time :</p>
<p><img src="platformcheck2.png" alt="diagram4"></p>
<p>While there is NO platform in this new area, we add 1 or -1 to <code>player.x</code>. That’s were the <code>sign</code> function come in handy: by doing <code>player.x = player.x + Sign(hsp)</code>, we’re moving the player 1 pixel right if <code>hsp</code> was positive, and 1 pixel left if <code>hsp</code> was negative. The movement will stop as soon as a platform enter this area.</p>
<p>Here’s the final code for this part, try and run it:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.load</span><span class="params">()</span></span></div><div class="line"></div><div class="line">    player = &#123;x = <span class="number">100</span>, y = <span class="number">500</span>, w = <span class="number">20</span>, h = <span class="number">20</span>&#125;</div><div class="line"></div><div class="line">    platform1 = &#123;x = <span class="number">250</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125;</div><div class="line">    platform2 = &#123;x = <span class="number">500</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125; </div><div class="line">    platforms = &#123;platform1, platform2&#125;</div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.update</span><span class="params">(dt)</span></span></div><div class="line"></div><div class="line">    <span class="keyword">if</span> love.keyboard.isDown(<span class="string">"right"</span>) <span class="keyword">then</span></div><div class="line">        hsp = <span class="number">5</span></div><div class="line">    <span class="keyword">elseif</span> love.keyboard.isDown(<span class="string">"left"</span>) <span class="keyword">then</span></div><div class="line">        hsp = <span class="number">-5</span></div><div class="line">    <span class="keyword">else</span> </div><div class="line">        hsp = <span class="number">0</span></div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line">    <span class="keyword">if</span> hsp &gt;= <span class="number">0</span> <span class="keyword">then</span></div><div class="line">        hoffset = player.w</div><div class="line">    <span class="keyword">else</span></div><div class="line">        hoffset = <span class="number">0</span></div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line">    <span class="keyword">if</span> CheckGroundAtPlace(player.x + hoffset + hsp, player.y, <span class="number">1</span>, player.h) <span class="keyword">then</span></div><div class="line">        <span class="keyword">while</span> <span class="keyword">not</span> CheckGroundAtPlace(player.x + hoffset + Sign(hsp) - <span class="number">1</span>, player.y, <span class="number">1</span>, player.h) <span class="keyword">do</span></div><div class="line">            player.x = player.x + Sign(hsp) </div><div class="line">        <span class="keyword">end</span></div><div class="line">    <span class="keyword">else</span></div><div class="line">        player.x = player.x + hsp </div><div class="line">    <span class="keyword">end</span></div><div class="line">	</div><div class="line"><span class="keyword">end</span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.draw</span><span class="params">()</span></span></div><div class="line"></div><div class="line">    <span class="comment">-- Draw the player</span></div><div class="line">    love.graphics.setColor(<span class="number">233</span>, <span class="number">30</span>, <span class="number">99</span>)</div><div class="line">    love.graphics.rectangle(<span class="string">"fill"</span>, player.x, player.y, player.w, player.h)</div><div class="line"></div><div class="line">    <span class="comment">-- Draw the level</span></div><div class="line">    love.graphics.setColor(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)</div><div class="line">    <span class="keyword">for</span> i, platform <span class="keyword">in</span> <span class="built_in">ipairs</span>(platforms) <span class="keyword">do</span></div><div class="line">    	love.graphics.rectangle(<span class="string">"fill"</span>, platform.x, platform.y, platform.w, platform.h)</div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">CheckCollision</span><span class="params">(x1,y1,w1,h1, x2,y2,w2,h2)</span></span></div><div class="line">  <span class="keyword">return</span> x1 &lt; x2+w2 <span class="keyword">and</span></div><div class="line">         x2 &lt; x1+w1 <span class="keyword">and</span></div><div class="line">         y1 &lt; y2+h2 <span class="keyword">and</span></div><div class="line">         y2 &lt; y1+h1</div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">CheckGroundAtPlace</span><span class="params">(x, y, w, h)</span></span></div><div class="line">	ret = <span class="literal">false</span></div><div class="line">	<span class="keyword">for</span> i, platform <span class="keyword">in</span> <span class="built_in">ipairs</span>(platforms) <span class="keyword">do</span></div><div class="line">    	<span class="keyword">if</span> CheckCollision(platform.x, platform.y, platform.w, platform.h, x, y, w, h) <span class="keyword">then</span></div><div class="line">			ret = <span class="literal">true</span></div><div class="line">		<span class="keyword">end</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">	<span class="keyword">return</span> ret </div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">Sign</span><span class="params">(number)</span></span></div><div class="line">	<span class="keyword">if</span> number &gt;= <span class="number">0</span> <span class="keyword">then</span></div><div class="line">		<span class="keyword">return</span> <span class="number">1</span></div><div class="line">	<span class="keyword">else</span> </div><div class="line">		<span class="keyword">return</span> <span class="number">-1</span></div><div class="line">	<span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>We’re now handling horizontal collisions, which was probably the hardest part. In the next article, we’ll deal with jumping and vertical collisions. This should be an easier one.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Continuing from where we left off in the previous article, we’ll handle basic player movements and collisions.&lt;/p&gt;
&lt;h2 id=&quot;Moving-the-pla
    
    </summary>
    
    
  </entry>
  
  <entry>
    <title>Making a barebone platformer with Löve - Part 1</title>
    <link href="http://yoursite.com/Making-a-platformer-with-Love-Part-1/"/>
    <id>http://yoursite.com/Making-a-platformer-with-Love-Part-1/</id>
    <published>2017-06-21T09:29:37.000Z</published>
    <updated>2017-08-08T17:59:05.474Z</updated>
    
    <content type="html"><![CDATA[<p><strong>Löve</strong> is a nice framework for developing games in Lua. While it is somewhat limited compared to other frameworks, this simplicity makes it well suited for beginners. This article is written as an introduction to Löve. I’ll assume you understand the basis of programmation such as variables, functions, and loops, but otherwise there’s no prior knowledge required. The Lua syntax is very simple, so you can learn as you go. For more details, go to the official <a href="https://www.lua.org/pil/1.html" target="_blank" rel="external">Lua website</a>.</p>
<p>Löve includes the physic engine <strong>Box2D</strong> by default, but since I didn’t want to make a physic based platformer, I ended up not using it. I mostly drew inspiration from <a href="http://gamemakertutorials.com/?p=383" target="_blank" rel="external">this tutorial</a>, which was written for <strong>GameMaker</strong>, and adapted it for Löve.</p>
<p>I wanted the final code to be as short as possible. I managed to make it under 150 lines, but I took some shortcuts and not everything is as structured as it should be. Feel free to send me suggestions on how to improve it.</p>
<p><img src="löve.png" alt="löve"></p>
<h2 id="Installing-and-running-Love"><a href="#Installing-and-running-Love" class="headerlink" title="Installing and running Löve"></a>Installing and running Löve</h2><p>First, go to the <a href="https://love2d.org/" target="_blank" rel="external">Löve website</a> and download and install the last version of Löve. Make sure to create a shortcut to it on your desktop. Then, create an empty folder (name it whatever you want) and create an empty file called <em>main.lua</em> within this folder. If you want to make sure everything is set up correctly, copy and paste the following code into the main.lua file:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.draw</span><span class="params">()</span></span></div><div class="line">    love.graphics.<span class="built_in">print</span>(<span class="string">"Hello World!"</span>, <span class="number">400</span>, <span class="number">300</span>)</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Then, drag and drop your folder into the Löve icon on your desktop. If you did everything properly, a black window with “Hello World!” written in white should open.</p>
<p>Side note: as a text editor, I would recommend using either <a href="https://code.visualstudio.com/" target="_blank" rel="external">Visual Studio Code</a> or <a href="https://notepad-plus-plus.org/" target="_blank" rel="external">Notepad++</a>. I’m personally using Visual Studio Code, but Notepad++ is more lightweight. <a href="http://brackets.io/" target="_blank" rel="external">Brackets</a> can be an option too. They all feature Lua syntax highligthing, so it’s up to you.</p>
<h2 id="Drawing-the-level"><a href="#Drawing-the-level" class="headerlink" title="Drawing the level"></a>Drawing the level</h2><p>The first step in our tutorial is to draw some platforms on screen. To begin with, we need to examine the structure of a Löve program. Let’s copy and paste this code into the main.lua file:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.load</span><span class="params">()</span></span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.update</span><span class="params">(dt)</span></span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.draw</span><span class="params">()</span></span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>These three functions are the core of a game wrote with Löve. Let’s examine them independantly:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.load</span><span class="params">()</span></span></div></pre></td></tr></table></figure>
<p><code>love.load</code> is the first function called when the game is launched. In other words, the code written between <code>function love.load</code> and <code>end</code> will be the first code to be executed. <code>love.load</code> is only executed once, and is mostly used for initializing values. For example, you could write <code>player.hp = 100</code> to initialize the player hit points to 100 when the game is launched.</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.update</span><span class="params">(dt)</span></span></div></pre></td></tr></table></figure>
<p><code>love.update</code> is called every frame while the game is running. For example, if you wrote <code>player.hp = player.hp + 1</code> within this function, then the player would regain one hit point every frame. The <code>dt</code> parameter indicates the time elapsed between the current and the previous frame, and can be used for some calculations (though we won’t use it in this tutorial).</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.draw</span><span class="params">()</span></span></div></pre></td></tr></table></figure>
<p><code>love.draw</code> is also called every frame. It is used for, you guessed it, drawing things on the screen. You’ve maybe noticed that in the “Hello World!” example, the code to actually draw the text on the screen was within the <code>love.draw</code> function. It wouldn’t have worked if it was within the <code>love.update</code> function.</p>
<p>Let’s get started by defining some coordinates for our platforms. We’ll create a new Lua object for each platform. Like this:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">platform1 = &#123;x = <span class="number">500</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125;</div></pre></td></tr></table></figure>
<p>Here I’m creating an object called <code>platform1</code>. This object has 4 parameters: <code>x</code>, <code>y</code>, <code>w</code>, <code>h</code>. These names are purely arbitrary, and I could have named them however I wanted. Since I want this code to only be called once at the start of the game, I put it in <code>love.load</code>:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.load</span><span class="params">()</span></span></div><div class="line">	platform1 = &#123;x = <span class="number">250</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125;</div><div class="line">	platform2 = &#123;x = <span class="number">500</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125;</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Now I would like to draw these platforms on the screen. Luckily, Löve provides a function called <code>love.graphics.rectangle</code>, which can be called within the <code>love.draw</code> function, like this:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.draw</span><span class="params">()</span></span></div><div class="line">	love.graphics.rectangle(<span class="string">"fill"</span>, x, y, width, height )</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><code>&quot;fill&quot;</code> indicates that we want to draw a rectangle with a solid color. The rest is pretty straightforward: we just pass it the x and y coordinates where we want to draw the rectangle, as well as its width and its height. To draw our platforms, we can do something like this:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.draw</span><span class="params">()</span></span></div><div class="line">	love.graphics.rectangle(<span class="string">"fill"</span>, platform1.x, platform1.y, platform1.w, platform1.h)</div><div class="line">	love.graphics.rectangle(<span class="string">"fill"</span>, platform2.x, platform2.y, platform2.w, platform2.h)</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Here’s the whole code so far. You can try to run it to see the result by yourself.</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.load</span><span class="params">()</span></span></div><div class="line">	platform1 = &#123;x = <span class="number">250</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125;</div><div class="line">	platform2 = &#123;x = <span class="number">500</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125; </div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.update</span><span class="params">(dt)</span></span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.draw</span><span class="params">()</span></span></div><div class="line">	love.graphics.rectangle(<span class="string">"fill"</span>, platform1.x, platform1.y, platform1.w, platform1.h)</div><div class="line">	love.graphics.rectangle(<span class="string">"fill"</span>, platform2.x, platform2.y, platform2.w, platform2.h)</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><img src="screenshot1.png" alt="screenshot1"></p>
<p>Now, we’re not going to copy and paste this line for each platfom in the level. What I suggest is creating a <code>platforms</code> object, which will store each platform. You can create it like this:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">platform1 = &#123;x = <span class="number">250</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125;</div><div class="line">platform2 = &#123;x = <span class="number">500</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125; </div><div class="line">platforms = &#123;platform1, platform2&#125;</div></pre></td></tr></table></figure>
<p>To draw each platform in the <code>platforms</code> object we’re going to use a loop. You need to replace the current content of the <code>love.draw</code> with the following code:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">for</span> i, platform <span class="keyword">in</span> <span class="built_in">ipairs</span>(platforms) <span class="keyword">do</span></div><div class="line">    love.graphics.rectangle(<span class="string">"fill"</span>, platform.x, platform.y, platform.w, platform.h)</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>I’m going to skip the details for the syntax (you can lookup <code>ipairs</code> in the Lua documentation), but you need to understand that this loop will be executed once for each platform contained in the <code>platforms</code> object. You can now add as much platform as you like, following the code we already wrote for <code>platform1</code> and <code>platform2</code>, and this loop will draw every platform one after another.</p>
<h2 id="Drawing-the-player"><a href="#Drawing-the-player" class="headerlink" title="Drawing the player"></a>Drawing the player</h2><p>Drawing the player will be very similar to drawing the platforms. Start by adding this line to the code already existing in <code>love.load</code>:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">player = &#123;x = <span class="number">100</span>, y = <span class="number">560</span>, w = <span class="number">20</span>, h = <span class="number">20</span>&#125;</div></pre></td></tr></table></figure>
<p>The player needs to be drawn in a different color than the platforms. So we’re going to use a new function: <code>love.graphics.setColor(r, g, b)</code>. By using this function (and providing it a color in RGB format), you’re basically telling Löve “everything I’ll draw after this will be drawn with this color”. The code in charge of drawing the player will look like this:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">love.graphics.setColor(<span class="number">233</span>, <span class="number">30</span>, <span class="number">99</span>) <span class="comment">-- A lovely shade of pink</span></div><div class="line">love.graphics.rectangle(<span class="string">"fill"</span>, player.x, player.y, player.w, player.h)</div></pre></td></tr></table></figure>
<p>As I said, everything drawn after the call to <code>love.graphics.setColor</code> will be drawn in pink… including the platforms! To avoid this, we’ll simply call that function again to draw the platforms in white, like so:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">love.graphics.setColor(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)</div><div class="line"><span class="keyword">for</span> i, platform <span class="keyword">in</span> <span class="built_in">ipairs</span>(platforms) <span class="keyword">do</span></div><div class="line">	love.graphics.rectangle(<span class="string">"fill"</span>, platform.x, platform.y, platform.w, platform.h)</div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>Here’s the code so far, you can try to run it:</p>
<figure class="highlight lua"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.load</span><span class="params">()</span></span></div><div class="line"></div><div class="line">	player = &#123;x = <span class="number">100</span>, y = <span class="number">560</span>, w = <span class="number">20</span>, h = <span class="number">20</span>&#125;</div><div class="line"></div><div class="line">	platform1 = &#123;x = <span class="number">250</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125;</div><div class="line">	platform2 = &#123;x = <span class="number">500</span>, y = <span class="number">500</span>, w = <span class="number">50</span>, h = <span class="number">30</span>&#125; </div><div class="line">	platforms = &#123;platform1, platform2&#125;</div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.update</span><span class="params">(dt)</span></span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div><div class="line"> </div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">love.draw</span><span class="params">()</span></span></div><div class="line"></div><div class="line">    <span class="comment">-- Draw the player</span></div><div class="line">    love.graphics.setColor(<span class="number">233</span>, <span class="number">30</span>, <span class="number">99</span>)</div><div class="line">    love.graphics.rectangle(<span class="string">"fill"</span>, player.x, player.y, player.w, player.h)</div><div class="line"></div><div class="line">    <span class="comment">-- Draw the level</span></div><div class="line">    love.graphics.setColor(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)</div><div class="line">    <span class="keyword">for</span> i, platform <span class="keyword">in</span> <span class="built_in">ipairs</span>(platforms) <span class="keyword">do</span></div><div class="line">    	love.graphics.rectangle(<span class="string">"fill"</span>, platform.x, platform.y, platform.w, platform.h)</div><div class="line">    <span class="keyword">end</span></div><div class="line"></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p><img src="screenshot2.png" alt="screenshot2"></p>
<h2 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2><p>That’s it for this part! We learned to draw things on the screen, which is a good start. In the next part, we will handle basic player movements and collisions.</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;strong&gt;Löve&lt;/strong&gt; is a nice framework for developing games in Lua. While it is somewhat limited compared to other frameworks, this si
    
    </summary>
    
    
  </entry>
  
</feed>
